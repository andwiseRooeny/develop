<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd">

    <!-- 
        학사 DB용 DataSource 설정 (Oracle 11g)
        Reference: member_integration_details.md
    -->
    <bean id="haksaDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
        <property name="url" value="jdbc:oracle:thin:@202.30.58.130:1521:SWD"/>
        <property name="username" value="YTIS_GONET"/>
        <property name="password" value="DUDEHDGONET0818"/>
        <property name="validationQuery" value="SELECT 1 FROM DUAL"/>
        <property name="testWhileIdle" value="true"/>
        <property name="timeBetweenEvictionRunsMillis" value="3600000"/>
    </bean>

    <!-- 
        학사 DB용 SqlSessionFactory
        Mapper XML 경로: webapp/_custom/u1/properties/mybatis/oracle/*.xml
    -->
    <bean id="haksaSqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="haksaDataSource"/>
        <property name="mapperLocations" value="classpath:/webapp/_custom/u1/properties/mybatis/oracle/*.xml"/>
        <!-- 필요시 MyBatis Config 추가 -->
        <!-- <property name="configLocation" value="classpath:/webapp/WEB-INF/properties/mybatis-config.xml"/> -->
    </bean>

    <!-- 
        학사 DB용 MapperScanner
        스캔 대상 패키지: com.andwise.jw.client.u1.custom.mapper (HaksaMemberMapper 존재)
        주의: basePackage를 너무 넓게 잡으면 주 데이터소스의 매퍼와 충돌할 수 있음.
    -->
    <bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <property name="basePackage" value="com.andwise.jw.client.u1.custom.mapper"/>
        <property name="sqlSessionFactoryBeanName" value="haksaSqlSessionFactory"/>
    </bean>

</beans>
