---
description: 사용자가 요청한 레퍼런스를 생성합니다. (다양한 입력 소스 분석 후 옵션 제안 또는 직접 입력 Fast Track)
---

이 워크플로우는 사용자가 제공한 **모든 형태의 입력(파일, 폴더, 코드블록 등)**을 분석하여 최적의 레퍼런스 주제를 제안하거나, 플래그를 통해 즉시 생성합니다.

**[Header]**: [개발-공통-준수-규칙](./개발-공통-준수-규칙.md)
**[Architecture]**: [분석-레퍼런스-분류-체계](./분석-레퍼런스-분류-체계.md) ← **필수 준수**
**[Template]**: [분석-레퍼런스-문서-템플릿](./분석-레퍼런스-문서-템플릿.md)

---

### 실행 단계

1. **[입력 모드 및 소스 분석]**
   - 사용자의 입력 파라미터를 분석하여 `TARGET_TYPE`(`common` 또는 `custom`)을 결정합니다.
   - **[Architecture]**를 참조하여 소스의 **계층(Layer)** 및 **분류 코드**를 사전 식별합니다.

   - **Case A: Explicit Flag (명시적 지정 - Fast Track)**
     - 조건: `-custom` 또는 `-common` 플래그가 **명시적으로 존재**하는 경우.
     - 동작:
       - 플래그에 따라 분류 결정 (`TARGET_TYPE`).
       - 함께 제공된 코드 블록이나 텍스트의 첫 줄을 제목으로 추출.
       - 분류 코드 자동 추론 후 즉시 **Step 4 (파일 생성)**로 이동.

   - **Case B: Implicit Input (유형 문의 - Interactive)**
     - 조건: 플래그 없이 파일, 폴더, 코드블록 등만 제공된 경우.
     - 동작:
       - **사용자에게 즉시 질문**: "생성할 레퍼런스의 저장 유형을 선택해주세요: (1) Common (공통 기술/아키텍처) (2) Custom (특화 로직/명세)"
       - 사용자 답변에 따라 `TARGET_TYPE`을 확정하고 **Step 2**로 진행.

2. **[컨텍스트 수집 및 고도화된 분석 제안]**
   - **종합 분석 (종합 분석 모드 자동 활성화)**:
     - 제공된 모든 입력 소스들을 하나의 연결된 시스템으로 보고, 리소스 간의 **상호작용, 데이터 흐름, 공통 설계 패턴 및 핵심 기술 노하우**를 3~4줄로 먼저 요약 설명합니다.
   
   - **분류 체계 분석 (필수)**:
     - **[Architecture]**의 5개 계층 및 분류 코드 체계를 참조하여 적합한 분류를 결정합니다.
   
   - **옵션 제안 (6 options)**:
     - **[핵심 기술 선언 - 4가지]**: 표준 기술, 아키텍처, 설정 패턴 등 선언적 정보.
     - **[종합 요약 및 구조 분석 - 2가지]**: 전체적인 역할, 컨셉, 데이터 흐름 분석 등.
     - 사용자에게 번호 선택(단일/복수)을 요청합니다.

3. **[고도화된 문서 작성]**
   - 선택된 옵션들을 기반으로 부연 설명 없이 **핵심 선언문과 참조 코드 위주로** 작성합니다.
   - **[Architecture]**의 `📄 레퍼런스 문서 템플릿` 섹션을 준수합니다.
   - **작성 규칙**: 장황한 설명 절대 금지 (항목당 1~2줄 이내).

4. **[파일 생성]**
   - 결정된 경로(`_develop/_ref/common/` 또는 `custom/`)에 `.md` 파일을 생성합니다.
   - **[Architecture]**의 `🏷️ 파일 명명 규칙` 섹션을 준수합니다.

