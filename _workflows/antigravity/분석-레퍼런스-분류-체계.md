---
description: 레이어드 아키텍처 기반의 레퍼런스 분류 체계 및 분류 코드를 정의합니다.
---

# 레퍼런스 분류 체계 (Layered Architecture Classification)

본 문서는 프로젝트 레퍼런스를 **레이어드 아키텍처(Layered Architecture)** 관점에서 체계적으로 분류하기 위한 표준 가이드입니다.
프레임워크에 독립적이며, 소프트웨어 설계의 보편적 계층 구조를 따릅니다.

---

## 📐 아키텍처 개요

```
┌─────────────────────────────────────────────────┐
│              Presentation Layer                  │  ← 화면/UI 표현
├─────────────────────────────────────────────────┤
│              Application Layer                   │  ← 요청 처리/흐름 제어
├─────────────────────────────────────────────────┤
│               Business Layer                     │  ← 비즈니스 로직/규칙
├─────────────────────────────────────────────────┤
│              Persistence Layer                   │  ← 데이터 접근/저장
├─────────────────────────────────────────────────┤
│              Infrastructure Layer                │  ← 기술 인프라/유틸리티
└─────────────────────────────────────────────────┘
```

각 계층은 **단방향 의존성**을 가지며, 상위 계층은 하위 계층에만 의존합니다.
이 원칙을 통해 관심사 분리(Separation of Concerns)와 유지보수성을 확보합니다.

---

## 🏷️ 분류 코드 체계

분류 코드는 `[계층약어]-[주제]` 형식으로 구성됩니다.

| 계층 | 약어 | 설명 |
|:---|:---|:---|
| Presentation | `pres` | 화면 표현, UI 컴포넌트 |
| Application | `app` | 요청 처리, 흐름 제어 |
| Business | `biz` | 비즈니스 로직, 도메인 규칙 |
| Persistence | `pers` | 데이터 접근, 영속성 관리 |
| Infrastructure | `infra` | 기술 기반, 외부 연동 |

---

## 1️⃣ Presentation Layer (표현 계층)

> **역할**: 사용자 인터페이스 렌더링, 입력 수신, 결과 표시
> **핵심 원칙**: 비즈니스 로직을 포함하지 않으며, 오직 "보여주기"에만 집중

### 분류 코드 상세

| 코드 | 주제 | 설명 | 포함 요소 예시 |
|:---|:---|:---|:---|
| `pres-view` | 뷰/템플릿 | 화면 렌더링을 위한 템플릿 및 레이아웃 | JSP, HTML, Thymeleaf, 레이아웃 구조, 공통 include 파일 |
| `pres-form` | 폼/입력 처리 | 사용자 입력 폼 구성 및 클라이언트 검증 | 폼 태그 구조, 클라이언트 validation, 에러 메시지 표시 규칙 |
| `pres-asset` | 정적 리소스 | CSS, JavaScript, 이미지 등 정적 자원 관리 | 스타일시트, 스크립트 번들링, 이미지 경로 규칙, CDN 설정 |
| `pres-component` | UI 컴포넌트 | 재사용 가능한 UI 위젯 및 공통 요소 | 모달, 테이블, 페이징, 탭, 아코디언, 알림 토스트 |

### 설계 지침
- 뷰 로직은 **조건부 렌더링**에 한정 (데이터 가공 금지)
- 모든 데이터는 Application Layer로부터 **완성된 형태**로 전달받음
- 스타일과 스크립트는 **모듈화**하여 재사용성 확보

---

## 2️⃣ Application Layer (애플리케이션 계층)

> **역할**: 요청 수신, 흐름 제어, 응답 구성, 트랜잭션 경계 조율
> **핵심 원칙**: 비즈니스 로직을 직접 구현하지 않고, Business Layer에 위임

### 분류 코드 상세

| 코드 | 주제 | 설명 | 포함 요소 예시 |
|:---|:---|:---|:---|
| `app-controller` | 컨트롤러 | HTTP 요청 매핑 및 응답 반환 | @Controller, @RestController, 요청 매핑, 파라미터 바인딩, 리다이렉션 |
| `app-interceptor` | 전처리/후처리 | 요청 전후 공통 처리 로직 | 인증 체크, 로깅, 권한 필터, 요청 시간 측정, 헤더 조작 |
| `app-dto` | 데이터 전송 객체 | 계층 간 데이터 전달용 객체 정의 | RequestDTO, ResponseDTO, 변환 로직(Mapper/Converter) |
| `app-validation` | 입력 검증 | 비즈니스 로직 진입 전 기본 유효성 체크 | @Valid, BindingResult, 필드 검증 규칙, 검증 그룹 |
| `app-exception` | 예외 핸들링 | 공통 예외 처리 및 에러 응답 구성 | @ExceptionHandler, 에러 코드 정의, 에러 응답 포맷 |

### 설계 지침
- 컨트롤러는 **얇게(Thin)** 유지: 요청 수신 → 서비스 호출 → 응답 반환
- DTO는 **불변(Immutable)** 객체로 설계 권장
- 예외 처리는 **중앙 집중화**하여 일관된 에러 응답 보장

---

## 3️⃣ Business Layer (비즈니스 계층)

> **역할**: 핵심 도메인 로직 및 비즈니스 규칙 구현
> **핵심 원칙**: 프레임워크 의존성 최소화, 순수한 비즈니스 로직에 집중

### 분류 코드 상세

| 코드 | 주제 | 설명 | 포함 요소 예시 |
|:---|:---|:---|:---|
| `biz-service` | 서비스 로직 | 트랜잭션 단위의 비즈니스 처리 | 사용자 등록, 주문 처리, 결제 검증, 상태 변경 오케스트레이션 |
| `biz-domain` | 도메인 모델 | 핵심 엔티티 및 값 객체 정의 | Entity, VO(Value Object), 도메인 규칙 캡슐화, 상태 머신 |
| `biz-rule` | 비즈니스 규칙 | 정책, 계산 로직, 조건 판단 | 할인 정책, 등급 산정, 유효성 규칙, 자격 조건 검증 |
| `biz-event` | 이벤트/알림 | 도메인 이벤트 및 후속 처리 트리거 | 이벤트 발행/구독, 알림 발송 트리거, 감사 로그 기록 |

### 설계 지침
- 서비스는 **유스케이스 단위**로 설계 (기능별 분리)
- 도메인 모델은 **Rich Domain Model** 지향 (로직을 엔티티 내부에 캡슐화)
- 비즈니스 규칙은 **명시적 클래스**로 분리하여 테스트 용이성 확보

---

## 4️⃣ Persistence Layer (영속 계층)

> **역할**: 데이터 저장, 조회, 트랜잭션 관리, 캐싱
> **핵심 원칙**: 데이터 접근 기술의 세부사항을 상위 계층으로부터 격리

### 분류 코드 상세

| 코드 | 주제 | 설명 | 포함 요소 예시 |
|:---|:---|:---|:---|
| `pers-mapper` | 매퍼/DAO | 데이터 접근 인터페이스 정의 | Mapper 인터페이스, DAO 패턴, Repository 인터페이스, CRUD 표준 |
| `pers-query` | 쿼리/SQL | SQL 작성 및 동적 쿼리 구성 | MyBatis XML, 동적 SQL, 복잡 쿼리, 페이징 쿼리, DBMS별 분기 |
| `pers-datasource` | 데이터소스 | 데이터베이스 연결 및 관리 | 멀티 DB 설정, 커넥션 풀, DataSource 스위칭, JNDI 설정 |
| `pers-transaction` | 트랜잭션 관리 | 트랜잭션 경계 및 전파 정책 | @Transactional, 전파 속성, 롤백 정책, 분산 트랜잭션 |
| `pers-cache` | 캐싱 | 데이터 캐싱 전략 및 무효화 | 쿼리 캐시, 2차 캐시, 캐시 키 전략, TTL 설정, 무효화 정책 |
| `pers-migration` | 스키마 관리 | 데이터베이스 스키마 버전 관리 | DDL 스크립트, 마이그레이션 도구, 스키마 변경 이력 |

### 설계 지침
- Mapper/DAO는 **인터페이스 기반**으로 설계하여 구현체 교체 용이
- 복잡한 쿼리는 **명명 규칙**을 통해 용도 명확화 (예: `selectListByCondition`)
- 트랜잭션 경계는 **Service Layer**에서 선언, Persistence Layer는 수동적으로 참여

---

## 5️⃣ Infrastructure Layer (인프라 계층)

> **역할**: 기술적 기반, 외부 시스템 연동, 공통 유틸리티 제공
> **핵심 원칙**: 모든 계층에서 공통으로 사용되는 횡단 관심사(Cross-Cutting Concerns) 담당

### 분류 코드 상세

| 코드 | 주제 | 설명 | 포함 요소 예시 |
|:---|:---|:---|:---|
| `infra-config` | 설정/구성 | 애플리케이션 설정 및 환경 관리 | properties 파일, 환경별 프로파일, Bean 설정, 외부 설정 주입 |
| `infra-security` | 보안 | 인증, 인가, 암호화 처리 | 로그인 처리, 세션 관리, 권한 체크, 암호화/복호화, CSRF/XSS 방어 |
| `infra-integration` | 외부 연동 | 외부 시스템 및 API 통신 | REST Client, SOAP 연동, SSO, 레거시 시스템 연계, 메시지 큐 |
| `infra-logging` | 로깅/모니터링 | 로그 기록 및 시스템 모니터링 | 로그 설정, 감사 로그, 성능 메트릭, 헬스 체크 |
| `infra-util` | 유틸리티 | 범용 헬퍼 및 공통 기능 | 날짜/문자열 처리, JSON 변환, 파일 I/O, 암호화 유틸 |
| `infra-batch` | 배치/스케줄 | 정기 작업 및 대량 처리 | 스케줄러 설정, 배치 잡 정의, 대용량 데이터 처리, 재시도 정책 |

### 설계 지침
- 설정은 **외부화(Externalization)** 하여 코드 변경 없이 환경 전환 가능
- 보안 로직은 **인터셉터/필터** 수준에서 일괄 적용
- 유틸리티는 **무상태(Stateless)** 정적 메서드로 설계

---

## 📁 권장 폴더 구조

레퍼런스 파일 저장 시 다음 구조를 따릅니다:

```
_ref/
├── common/                        # 공통 기술 (재사용 가능)
│   ├── presentation/              # 표현 계층
│   │   └── [pres-*] 레퍼런스들
│   ├── application/               # 애플리케이션 계층
│   │   └── [app-*] 레퍼런스들
│   ├── business/                  # 비즈니스 계층
│   │   └── [biz-*] 레퍼런스들
│   ├── persistence/               # 영속 계층
│   │   └── [pers-*] 레퍼런스들
│   └── infrastructure/            # 인프라 계층
│       └── [infra-*] 레퍼런스들
│
├── custom/                        # 프로젝트 특화 로직
│   └── (동일한 계층 구조 적용 가능)
│
└── _Ref_Index.md                  # 통합 인덱스
```

---

## 🏷️ 파일 명명 규칙

레퍼런스 파일명은 다음 형식을 따릅니다:

```
[분류코드]_[주제명]_레퍼런스.md
```

### 예시
| 파일명 | 분류 |
|:---|:---|
| `app-controller_LoginController_레퍼런스.md` | Application - 컨트롤러 |
| `pers-mapper_MyBatis_CRUD_표준_레퍼런스.md` | Persistence - 매퍼 |
| `infra-security_세션_관리_레퍼런스.md` | Infrastructure - 보안 |
| `biz-service_회원_등록_로직_레퍼런스.md` | Business - 서비스 |

---

## 🔍 분류 코드 빠른 참조표

| 계층 | 코드 | 한글 주제 |
|:---|:---|:---|
| **Presentation** | `pres-view` | 뷰/템플릿 |
| | `pres-form` | 폼/입력 처리 |
| | `pres-asset` | 정적 리소스 |
| | `pres-component` | UI 컴포넌트 |
| **Application** | `app-controller` | 컨트롤러 |
| | `app-interceptor` | 전처리/후처리 |
| | `app-dto` | 데이터 전송 객체 |
| | `app-validation` | 입력 검증 |
| | `app-exception` | 예외 핸들링 |
| **Business** | `biz-service` | 서비스 로직 |
| | `biz-domain` | 도메인 모델 |
| | `biz-rule` | 비즈니스 규칙 |
| | `biz-event` | 이벤트/알림 |
| **Persistence** | `pers-mapper` | 매퍼/DAO |
| | `pers-query` | 쿼리/SQL |
| | `pers-datasource` | 데이터소스 |
| | `pers-transaction` | 트랜잭션 관리 |
| | `pers-cache` | 캐싱 |
| | `pers-migration` | 스키마 관리 |
| **Infrastructure** | `infra-config` | 설정/구성 |
| | `infra-security` | 보안 |
| | `infra-integration` | 외부 연동 |
| | `infra-logging` | 로깅/모니터링 |
| | `infra-util` | 유틸리티 |
| | `infra-batch` | 배치/스케줄 |

---

> [!NOTE]
> 본 문서는 레퍼런스 **분류 체계**를 위한 단일 관리 포인트입니다.
> 문서 템플릿 및 인덱스 포맷은 [분석-레퍼런스-문서-템플릿](./분석-레퍼런스-문서-템플릿.md)을 참조하세요.
